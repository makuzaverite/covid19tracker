var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,c=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&o(e,a,t[a]);if(r)for(var a of r(t))l.call(t,a)&&o(e,a,t[a]);return e},s=(e,r)=>t(e,a(r));import{r as m,a as i,R as u,L as d,M as p,T as f,b as E,c as g,S as y,d as h,e as v,H as b}from"./vendor.00a32b96.js";const x="make_request",w="get_data",C="error";function P(e,t){switch(t.type){case x:return{loading:!0,data:{}};case w:return s(c({},e),{loading:!1,data:t.payload.data,error:!1});case C:return s(c({},e),{loading:!1,error:t.payload.error,data:{}});default:return e}}function O(e,t){const[a,r]=m.exports.useReducer(P,{data:{},loading:!0,error:!1});async function n(){r({type:x});try{const e=await i.get("https://covid19.mathdro.id/api");r({type:w,payload:{data:e.data}})}catch(e){r({type:C,payload:{error:e}})}}return m.exports.useEffect((()=>{"country"===t?e.length<=0?n():async function(e){r({type:x});try{const t=await i.get(`https://covid19.mathdro.id/api/countries/${e}`);r({type:w,payload:{data:t.data}})}catch(t){r({type:C,payload:{error:t}})}}(e.toLowerCase()):n()}),[e,t]),a}function S(){return u.createElement("div",{className:"header"},u.createElement(d,{to:"/"},"Covid 19 Tracker"),u.createElement(d,{to:"map"},"Map View"))}const F=e=>(new Intl.NumberFormat).format(e),N=e=>{const t=new Date(e);return`\n  ${M(t.getDate())}/${M(t.getMonth())}/${M(t.getFullYear())} ,\n  ${M(t.getHours())}:${M(t.getMinutes())}:${M(t.getSeconds())}`},M=e=>e<=9?`0${e}`:e;function $({location:e,confirmed:t,dead:a,recovered:r,updated:n}){return u.createElement("div",null,u.createElement("h2",{style:{textAlign:"center"}},e),u.createElement("p",null,u.createElement("strong",null,"Confirmed:")," ",F(t)),u.createElement("p",null,u.createElement("strong",null,"Death:")," ",F(a)),u.createElement("p",null,u.createElement("strong",null,"Recovered:")," ",F(r)),u.createElement("p",null,u.createElement("strong",null,"Last update:")," ",N(n)))}function j(){const e=function(){const[e,t]=m.exports.useState([]);return m.exports.useEffect((()=>{(async()=>{const e=await i.get("https://www.trackcorona.live/api/countries"),{data:a}=e.data;t(a)})()}),[]),e}();return e&&u.createElement(p,{center:[0,0],zoom:3},u.createElement(f,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),e.map((e=>u.createElement(E,{key:e.country_code,position:[e.latitude,e.longitude]},u.createElement(g,{fillColor:"red",offset:[0,20],opacity:1,direction:"right",style:{backgroundColor:"#00293d"}},u.createElement($,{location:e.location,dead:e.dead,recovered:e.recovered,confirmed:e.confirmed,updated:e.updated}))))))}const k=({param:e,onParamChange:t})=>u.createElement(u.Fragment,null,u.createElement("form",{className:"searchBox"},u.createElement("input",{type:"text",placeholder:"Search for a specific country...",autoFocus:!0,value:e,onChange:t})));function z({location:e,lastupdate:t}){return u.createElement("div",{className:"status-header"},e?u.createElement("div",{style:{textAlign:"center",color:"#fff"}},u.createElement("h4",{style:{textTransform:"capitalize"}}," ",e," status information about pandemic"),u.createElement("span",{style:{color:"#fff"}},"last updated ",t)," "):u.createElement("div",{style:{textAlign:"center",color:"#fff"}},u.createElement("h4",null,"Global status information about virus "),u.createElement("span",{style:{color:"#fff"}},"last updated ",t)," "))}function A({data:e,location:t}){return e.error?u.createElement("p",{style:{textAlign:"center",fontFamily:"Poppins",fontWeight:"bold",marginTop:"10rem",fontSize:"30px",color:"#fff"}},"Country ",u.createElement("strong",null,'"',t,'"')," not found"):e.loading?u.createElement("p",{style:{textAlign:"center",fontFamily:"Poppins",fontWeight:"bold",marginTop:"10rem",fontSize:"30px",color:"#fff"}},"Loading..."):u.createElement(u.Fragment,null,u.createElement(z,{location:t,lastupdate:N(e.data.lastUpdate)}),u.createElement("div",{className:"dashboard"},u.createElement("div",{className:"case"},u.createElement("img",{src:"/assets/virus.037155f5.svg",alt:"total cases icon"}),u.createElement("h3",null,"Cases"),u.createElement("p",null,F(e.data.confirmed.value))),u.createElement("div",{className:"recorved"},u.createElement("img",{src:"/assets/address.a67d0e3c.svg",alt:"total cases icon"}),u.createElement("h3",null,"Recovered"),u.createElement("p",null,F(e.data.recovered.value))),u.createElement("div",{className:"deaths"},u.createElement("img",{src:"/assets/death.fc7e1372.svg",alt:"total cases icon"}),u.createElement("h3",null,"Deaths"),u.createElement("p",null,F(e.data.deaths.value)))))}function D(){return u.createElement("div",{className:"note"},u.createElement("p",{style:{color:"#fff"}},"Made with"," ",u.createElement("span",{role:"img","aria-label":"love"},"❤️❤️")," ","by"," ",u.createElement("a",{href:"https://twitter.com/makuza_mugabo_v"},"Makuza Mugabo Verite")))}function T({param:e,onParamChange:t,state:a}){return u.createElement(m.exports.Fragment,null,u.createElement(k,{param:e,onParamChange:t}),u.createElement(A,{data:a,location:e}),u.createElement(D,null))}function _(){const[e,t]=m.exports.useState(""),[a,r]=m.exports.useState("all"),n=O(e,a);return u.createElement(u.Fragment,null,u.createElement(S,null),u.createElement(y,null,u.createElement(h,{path:"/",exact:!0},u.createElement(T,{state:n,onParamChange:e=>{const a=e.target.value;t(a),a.length<=0?r("all"):r("country")},param:e})),u.createElement(h,{path:"/map",exact:!0},u.createElement(j,null))))}v.render(u.createElement(b,null,u.createElement(_,null)),document.getElementById("root"));
