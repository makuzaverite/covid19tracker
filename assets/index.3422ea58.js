var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,c=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&o(e,a,t[a]);if(r)for(var a of r(t))l.call(t,a)&&o(e,a,t[a]);return e},s=(e,r)=>t(e,a(r));import{r as m,a as i,R as d,L as u,M as p,T as f,b as E,c as g,S as y,d as h,e as v,H as b}from"./vendor.00a32b96.js";const x="make_request",w="get_data",C="error";function P(e,t){switch(t.type){case x:return{loading:!0,data:{}};case w:return s(c({},e),{loading:!1,data:t.payload.data,error:!1});case C:return s(c({},e),{loading:!1,error:t.payload.error,data:{}});default:return e}}function k(e,t){const[a,r]=m.exports.useReducer(P,{data:{},loading:!0,error:!1});async function n(){r({type:x});try{const e=await i.get("https://covid19.mathdro.id/api");r({type:w,payload:{data:e.data}})}catch(e){r({type:C,payload:{error:e}})}}return m.exports.useEffect((()=>{"country"===t?e.length<=0?n():async function(e){r({type:x});try{const t=await i.get(`https://covid19.mathdro.id/api/countries/${e}`);r({type:w,payload:{data:t.data}})}catch(t){r({type:C,payload:{error:t}})}}(e.toLowerCase()):n()}),[e,t]),a}function O(){return d.createElement("div",{className:"header"},d.createElement(u,{to:"/"},"Covid 19 Tracker"),d.createElement(u,{to:"map"},"Map View"))}const S=e=>(new Intl.NumberFormat).format(e),F=e=>{const t=new Date(e);return`\n  ${N(t.getDate())}/${N(t.getMonth())}/${N(t.getFullYear())} ,\n  ${N(t.getHours())}:${N(t.getMinutes())}:${N(t.getSeconds())}`},N=e=>e<=9?`0${e}`:e;function M({location:e,confirmed:t,dead:a,recovered:r,updated:n}){return d.createElement("div",null,d.createElement("h2",{style:{textAlign:"center"}},e),d.createElement("p",null,d.createElement("strong",null,"Confirmed:")," ",S(t)),d.createElement("p",null,d.createElement("strong",null,"Death:")," ",S(a)),d.createElement("p",null,d.createElement("strong",null,"Recovered:")," ",S(r)),d.createElement("p",null,d.createElement("strong",null,"Last update:")," ",F(n)))}function $(){const e=function(){const[e,t]=m.exports.useState([]);return m.exports.useEffect((()=>{(async()=>{const e=await i.get("https://www.trackcorona.live/api/countries"),{data:a}=e.data;t(a)})()}),[]),e}();return e&&d.createElement(p,{center:[0,0],zoom:3},d.createElement(f,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),e.map((e=>d.createElement(E,{key:e.country_code,position:[e.latitude,e.longitude]},d.createElement(g,{fillColor:"red",offset:[0,20],opacity:1,direction:"right",style:{backgroundColor:"#00293d"}},d.createElement(M,{location:e.location,dead:e.dead,recovered:e.recovered,confirmed:e.confirmed,updated:e.updated}))))))}const j=({param:e,onParamChange:t})=>d.createElement(d.Fragment,null,d.createElement("form",{className:"searchBox"},d.createElement("input",{type:"text",placeholder:"Search for a specific country...",autoFocus:!0,value:e,onChange:t})));function z({location:e,lastupdate:t}){return d.createElement("div",{className:"status-header"},e?d.createElement("div",{style:{textAlign:"center",color:"#fff"}},d.createElement("h4",{style:{textTransform:"capitalize"}}," ",e," status information about pandemic"),d.createElement("span",{style:{color:"#fff"}},"last updated ",t)," "):d.createElement("div",{style:{textAlign:"center",color:"#fff"}},d.createElement("h4",null,"Global status information about virus "),d.createElement("span",{style:{color:"#fff"}},"last updated ",t)," "))}function A({data:e,location:t}){return e.error?d.createElement("p",{style:{textAlign:"center",fontFamily:"Poppins",fontWeight:"bold",marginTop:"10rem",fontSize:"30px",color:"#fff"}},"Country ",d.createElement("strong",null,'"',t,'"')," not found"):e.loading?d.createElement("p",{style:{textAlign:"center",fontFamily:"Poppins",fontWeight:"bold",marginTop:"10rem",fontSize:"30px",color:"#fff"}},"Loading..."):d.createElement(d.Fragment,null,d.createElement(z,{location:t,lastupdate:F(e.data.lastUpdate)}),d.createElement("div",{className:"dashboard"},d.createElement("div",{className:"case"},d.createElement("img",{src:"/covid19tracker/assets/virus.037155f5.svg",alt:"total cases icon"}),d.createElement("h3",null,"Cases"),d.createElement("p",null,S(e.data.confirmed.value))),d.createElement("div",{className:"recorved"},d.createElement("img",{src:"/covid19tracker/assets/address.a67d0e3c.svg",alt:"total cases icon"}),d.createElement("h3",null,"Recovered"),d.createElement("p",null,S(e.data.recovered.value))),d.createElement("div",{className:"deaths"},d.createElement("img",{src:"/covid19tracker/assets/death.fc7e1372.svg",alt:"total cases icon"}),d.createElement("h3",null,"Deaths"),d.createElement("p",null,S(e.data.deaths.value)))))}function D(){return d.createElement("div",{className:"note"},d.createElement("p",{style:{color:"#fff"}},"Made with"," ",d.createElement("span",{role:"img","aria-label":"love"},"❤️❤️")," ","by"," ",d.createElement("a",{href:"https://twitter.com/makuza_mugabo_v"},"Makuza Mugabo Verite")))}function T({param:e,onParamChange:t,state:a}){return d.createElement(m.exports.Fragment,null,d.createElement(j,{param:e,onParamChange:t}),d.createElement(A,{data:a,location:e}),d.createElement(D,null))}function _(){const[e,t]=m.exports.useState(""),[a,r]=m.exports.useState("all"),n=k(e,a);return d.createElement(d.Fragment,null,d.createElement(O,null),d.createElement(y,null,d.createElement(h,{path:"/",exact:!0},d.createElement(T,{state:n,onParamChange:e=>{const a=e.target.value;t(a),a.length<=0?r("all"):r("country")},param:e})),d.createElement(h,{path:"/map",exact:!0},d.createElement($,null))))}v.render(d.createElement(b,null,d.createElement(_,null)),document.getElementById("root"));
